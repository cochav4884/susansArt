<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Art Gallery</title>

  <link rel="icon" type="image/png" href="public/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="public/favicon.svg" />
  <link rel="shortcut icon" href="public/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="public/apple-touch-icon.png" />
  <meta name="apple-mobile-web-app-title" content="susansArt" />
  <link rel="manifest" href="public/site.webmanifest" />

  <link rel="stylesheet" href="styles/index.css">
  <link rel="stylesheet" href="styles/art.css">

  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

<header class="nav">
  <a href="index.html" class="back-btn">
    <img src="public/favicon.ico" alt="Art Tracker Logo" class="nav-avatar">
  </a>
  <span class="nav-brand">ðŸŽ¨ Art Gallery</span>
</header>

<section class="jumbotron">
  <div>
    <img src="images/susan.jpg" alt="Picture of Artist Susan" class="jumbotron-avatar">
    <h1>Artist: Susan</h1>
    <p>Track every art project from idea to completion.</p>
  </div>
</section>

<main class="reading-container">
  <h1 class="book-title">Completed Artwork</h1>

  <!-- Dropdown -->
  <div>
    <label for="artDropdown">Choose Artwork:</label>
    <select id="artDropdown" class="form-select"></select>
  </div>

  <!-- Art Display Area -->
  <div class="art-viewer" id="artViewer"></div>
</main>

<footer class="site-footer">
  <p>Artist: Susan | <span id="year"></span></p>
  <p>
    <a href="privacyPolicy.html">Privacy Policy</a> |
    <a href="legalDisclaimer.html">Legal Disclaimer</a>
  </p>
</footer>

<script>
  const STORAGE_KEY = "artCards";
  const COMPLETED_STAGE_INDEX = 4; // "Completed"

  const artDropdown = document.getElementById("artDropdown");
  const artViewer = document.getElementById("artViewer");

  function loadCompletedArt() {
    const data = localStorage.getItem(STORAGE_KEY);
    if (!data) return [];

    return JSON.parse(data).filter(card =>
      card.stages[COMPLETED_STAGE_INDEX] &&
      card.images[COMPLETED_STAGE_INDEX] &&
      card.images[COMPLETED_STAGE_INDEX].length > 0
    );
  }

  let completedArt = loadCompletedArt();

  function populateDropdown() {
    artDropdown.innerHTML = "";

    if (completedArt.length === 0) {
      const opt = document.createElement("option");
      opt.textContent = "-- No Completed Art Yet --";
      opt.value = "";
      artDropdown.appendChild(opt);
      artViewer.innerHTML = "<p>No completed artwork available.</p>";
      return;
    }

    completedArt.forEach((art, index) => {
      const opt = document.createElement("option");
      opt.value = index;
      opt.textContent = art.title || "Untitled Artwork";
      artDropdown.appendChild(opt);
    });

    artDropdown.value = 0;
    displayImages(0);
  }

  function displayImages(index) {
    artViewer.innerHTML = "";

    if (!completedArt[index]) {
      artViewer.innerHTML = "<p>No artwork selected.</p>";
      return;
    }

    completedArt[index].images[COMPLETED_STAGE_INDEX].forEach(imgSrc => {
      const frame = document.createElement("div");
      frame.className = "art-frame";

      const img = document.createElement("img");
      img.src = imgSrc;
      img.alt = completedArt[index].title || "Completed Artwork";

      frame.appendChild(img);
      artViewer.appendChild(frame);
    });
  }

  artDropdown.addEventListener("change", e => {
    displayImages(e.target.value);
  });

  document.getElementById("year").textContent = new Date().getFullYear();

  populateDropdown();
</script>

</body>
</html>
